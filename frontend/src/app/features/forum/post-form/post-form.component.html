<div class="post-form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? 'Edit Post' : 'Create New Post' }}</h1>
    <button (click)="cancel()" class="btn-cancel">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="display: inline-block; vertical-align: middle; margin-right: 6px;">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Cancel
    </button>
  </div>

  <div *ngIf="loading && isEditMode" class="loading">
    <p>Loading...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>

  <form [formGroup]="postForm" (ngSubmit)="onSubmit()" *ngIf="!loading || !isEditMode">
    <div class="form-group">
      <label for="category">Category *</label>
      <select 
        id="category" 
        formControlName="category_id" 
        class="form-control"
        [disabled]="!!categoryId">
        <option [value]="null">Select a category</option>
        <option *ngFor="let cat of categories" [value]="cat.id">
          {{ cat.icon }} {{ cat.name }}
        </option>
      </select>
      <small *ngIf="categoryId" class="form-hint">
        This category is pre-selected
      </small>
    </div>

    <div class="form-group">
      <label for="title">Title *</label>
      <input 
        type="text" 
        id="title" 
        formControlName="title" 
        class="form-control"
        placeholder="Post title (5-200 characters)">
      <small *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched" class="error-text">
        Title must be between 5 and 200 characters
      </small>
    </div>

    <div class="form-group">
      <label for="content">Content *</label>
      <textarea 
        id="content" 
        formControlName="content" 
        class="form-control content-textarea"
        rows="12"
        placeholder="Post content (minimum 10 characters)"></textarea>
      <small *ngIf="postForm.get('content')?.invalid && postForm.get('content')?.touched" class="error-text">
        Content must have at least 10 characters
      </small>
    </div>

    <div class="form-group">
      <label for="tags">Tags (optional)</label>
      <input 
        type="text" 
        id="tags" 
        [(ngModel)]="tagsInput"
        [ngModelOptions]="{standalone: true}"
        (input)="onTagsChange()"
        class="form-control"
        placeholder="tag1, tag2, tag3 (comma separated)">
      <small class="form-hint">
        Separate tags with commas. Example: trading, bitcoin, strategy
      </small>
    </div>

    <div class="form-actions">
      <button 
        type="button" 
        (click)="cancel()" 
        class="btn-cancel-action">
        Cancel
      </button>
      <button 
        type="submit" 
        [disabled]="postForm.invalid || loading"
        class="btn-submit">
        {{ loading ? 'Sending...' : (isEditMode ? 'Update' : 'Create Post') }}
      </button>
    </div>
  </form>
</div>

